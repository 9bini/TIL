# Spring Boot AOP 기술로 관점 지향 프로그래밍 이해하기

목차

1. 부가 기능을 위임하는 전통적인 방법 (프록시 ,데코데이터)

1. 스프링에서 부가 기능을 위임하는 방법 AOP

1. 실습 (사용자의 마지막 접속 이력 로그 남기기)

## 부가 기능을 위임하는 전통적인 방법 (프록시)

다른 무언가와 이어지는 인터페이스의 역할을 하는 클래스
(어떠한 것과도 인터페이스의 역할을 수행할 수 있음)

어떤 객체에 대한 접근을 제어하는 용도로 대리인이나 대변인에 해당하는 객체를 제공하는 패턴

> 왜 어떤 객체에 대한 접근을 제어하지?? 직접 접근이 아닌?

핵심 기능과 부가 기능을 구연해야 될 때 혹은 부가 기능을 추가 해야 될 떄  
핵심 기능에는 오직 핵심 기능만 담당하게 부가 기능이 섞여 있으니 프록시에 부가 기능을 빼내어 위임

## 부가 기능을 위임하는 전통적인 방법 (데코레이터 패턴)

주어진 상황 및 용도에 따라 어떤 객체에 책임을 덧붙이는 패턴  
기능 확장이 필요할 때 서브클래싱 대신 쓸 수 있는 `유연한 대안` 될 수 있음

## 스프링에서 부가 기능을 위임하는 방법 - AOP

횡단 관심사의 분리를 허용함으로써 모듈성을 증가시키는 것이 목적인 프로그래밍 패러다임

"기능의 코드 핵심부를 어수선하게 채우지 않고도 비즈니스 로직에 핵심적이지 않은 동작들을 프로그램에 추가할 수 있게 함"

### AOP의 특징

1. AOP는 프로그램 구조에 대한 또 다른 사고 방식을 제공하여 OOP를 보완함

1. OOP에서 모듈화의 핵심 단위는 클래스(역활,의도)이고 AOP에서는 모듕화 단위가 aspect임

1. Aspect는 여러 유형과 객체에 걸쳐있는 트랜잭션 관리와 같은 괌심사의 모듈화를 가능하게 함

### AOP의 용어

AOP의 용어는 Spring에 국한 된것이 아님

1. Aspect - 여러 클래스에 걸친 관심사의 모듈화
1. Join point - 메소드 실행 또는 예외 처리와 같은 프로그램 실행 중 지점
1. Advice - 특정한 Join point에서 Aspect에 의해 행해진 액션
1. Pointcut - Join Point 중에서 Aspect가 Weaving 되어야 할 Join Point의 집항을 정의한 것
1. Introduction - 기존 클래스에 추가적인 메소드나 필드를 선언하여 사용하는 방식
1. Target object - 하나 이상의 Aspect 에서 Advice 된 객체. Spring AOP는 런타임 프록시를 사용하여 구현되므로 이 개체는 항상 프록시 객체가됨
1. AOP proxy - Aspect를 구현하기 위해 AOP 프레임워크에 의해 생성된 객체
1. Weaving - 다른 애플리케이션 유형 또는 객체와 Aspect를 연결하여 권장 개체를 만들는 것.

출처: https://fastcampus.co.kr/spring_academia

### AOP 어노테이션

1. @Before : 메소드 실행 전
2. @After : 메소드 실행 후
3. @BeforeReturning : 메소드 반환 전
4. @BeforeThrowing : 에러 반환 전
5. @AfterReturning : 메소드 반환 후
6. @AfterThrowing : 에러 반환 후
7. @Around : 메소드 실행 전후

어노테이션 사용 시 어디에서 사용할지에 대한 정보를 작성해워야한다.

```java
@Before("@annotation(AlarmGreetingMachine)")
// 이런 식으로 어노테이션을 작성할 수 있다.
```
